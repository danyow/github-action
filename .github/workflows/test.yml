name: 输入运行参数
on:
  push:
    branches:
      - main
    paths:
      - "Assets/**"
      - "Packages/**"
      - "ProjectSettings/**"
  release:
    types:
      - published
  workflow_dispatch:
    inputs:
      releaseMode:
        description: '工作流模式 [release, debug]'
        type: choice
        options:
          - release
          - debug
        required: true
        default: 'debug'
      linuxTargetPlatforms:
        description: '[Android, iOS, StandaloneOSX, StandaloneLinux64, WebGL]'
        type: string
        required: true
        default: 'WebGL'
      windowTargetPlatforms:
        description: '[StandaloneWindows, WSAPlayer]'
        type: string
        required: false
        default: ''
      win64TargetPlatform:
        description: '[StandaloneWindows64]'
        type: string
        required: false
        default: ''
jobs:
  
  set_default_options:
    name: 设置默认值
    runs-on: ubuntu-latest
    env:
      linuxTargetPlatforms: ${{ github.event.inputs.linuxTargetPlatforms }}
      windowTargetPlatforms: ${{ github.event.inputs.windowTargetPlatforms }}
      win64TargetPlatform: ${{ github.event.inputs.win64TargetPlatform }}
    steps:
      -
        name: 判断是否有输入值
        id: check
        run: |
          echo 输入值为 "$linuxTargetPlatforms"
          if [ "$linuxTargetPlatforms" == "" ]; then
            echo 并没有检测到输入值
            echo "::set-output name=linuxTargetPlatforms::'WebGL'"
          else
            echo 检测到有输入值
            array=(${linuxTargetPlatforms//, / })
            echo "::set-output name=linuxTargetPlatforms::$array)"
            for var in ${array[@]}
            do
              echo $var
            done
          fi
          echo 完成      
